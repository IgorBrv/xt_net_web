@using Epam.ASPNet.PL;
@using Epam.CommonEntities;
@using Epam.DependencyResolver;
@using Epam.ASPNet.PL.Models;
@using Epam.Interfaces.BLL;

@{
    Resolver resolver = StaticElements.GetResolver();
    IUsersBLL bloUsers = resolver.GetBloUsers;
    bloUsers.SetPath(Server.MapPath(""));
    ILogger logger = resolver.GetLogger;

    if (User.Identity.IsAuthenticated)
    {
        if (CommonData.currentUser is null)
        {
            CommonData.currentUser = bloUsers.Get(User.Identity.Name);
            Console.WriteLine(CommonData.currentUser);
        }

        Response.Redirect("~/Pages/userPage.cshtml");

    }
    else
    {
        Response.Redirect("~/Pages/authPage.cshtml");
    }
}
